<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprensi√≥n Auditiva | Tema 5: Mi Familia</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .header { background: linear-gradient(135deg, #F57C00 0%, #E65100 100%); border-radius: 20px; padding: 25px; text-align: center; margin-bottom: 20px; color: white; box-shadow: 0 8px 30px rgba(245, 124, 0, 0.3); }
        .header h1 { font-size: 1.8rem; margin-bottom: 8px; }
        .header-info { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 10px; }
        .badge { background: rgba(255,255,255,0.2); padding: 6px 14px; border-radius: 20px; font-size: 0.85rem; }
        .nav-buttons { display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; }
        .nav-btn { padding: 12px 24px; border: none; border-radius: 25px; font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 8px; text-decoration: none; }
        .nav-btn.home { background: linear-gradient(135deg, #607D8B 0%, #455A64 100%); color: white; }
        .nav-btn.home:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(69, 90, 100, 0.4); }
        .instructions { background: white; border-radius: 16px; padding: 20px; margin-bottom: 20px; border-left: 4px solid #F57C00; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .instructions h3 { color: #F57C00; margin-bottom: 10px; }
        .instructions ul { margin-left: 20px; color: #555; }
        .instructions li { margin: 8px 0; }
        .speed-control { background: white; border-radius: 16px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; }
        .speed-control h3 { color: #F57C00; margin-bottom: 15px; }
        .speed-buttons { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .speed-btn { padding: 12px 24px; border: 2px solid #F57C00; background: white; color: #F57C00; border-radius: 25px; font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .speed-btn:hover { background: #FFF3E0; }
        .speed-btn.active { background: #F57C00; color: white; }
        .score-panel { background: white; border-radius: 12px; padding: 15px 25px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); flex-wrap: wrap; gap: 10px; }
        .score-item { text-align: center; flex: 1; min-width: 80px; }
        .score-item .label { font-size: 0.7rem; color: #888; text-transform: uppercase; }
        .score-item .value { font-size: 1.3rem; font-weight: 700; color: #F57C00; }
        .score-item .value.correct { color: #4CAF50; }
        .score-item .value.incorrect { color: #f44336; }
        .level-section { margin-bottom: 30px; }
        .level-header { padding: 15px 20px; border-radius: 15px; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .level-header.easy { background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); border-left: 5px solid #4CAF50; }
        .level-header.medium { background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); border-left: 5px solid #FF9800; }
        .level-header.hard { background: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%); border-left: 5px solid #f44336; }
        .level-header .icon { font-size: 1.5rem; }
        .level-header .title { font-size: 1.1rem; font-weight: 700; }
        .level-header.easy .title { color: #2E7D32; }
        .level-header.medium .title { color: #E65100; }
        .level-header.hard .title { color: #C62828; }
        .level-header .subtitle { font-size: 0.85rem; color: #666; margin-left: auto; }
        .audio-card { background: white; border-radius: 20px; padding: 25px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .audio-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #FFF3E0; }
        .audio-number { width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; font-weight: 700; color: white; }
        .audio-number.easy { background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%); }
        .audio-number.medium { background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); }
        .audio-number.hard { background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%); }
        .audio-title { flex: 1; }
        .audio-title h3 { color: #333; font-size: 1rem; }
        .audio-title p { color: #888; font-size: 0.8rem; margin-top: 3px; }
        .audio-player { background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); border-radius: 15px; padding: 20px; margin-bottom: 15px; text-align: center; }
        .play-btn { width: 70px; height: 70px; border-radius: 50%; border: none; background: linear-gradient(135deg, #F57C00 0%, #E65100 100%); color: white; font-size: 1.8rem; cursor: pointer; box-shadow: 0 4px 20px rgba(245, 124, 0, 0.4); transition: all 0.3s; }
        .play-btn:hover { transform: scale(1.1); }
        .play-btn.playing { background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%); }
        .text-buttons { margin-top: 15px; display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .text-btn { padding: 8px 16px; border: 2px solid #F57C00; background: white; color: #F57C00; border-radius: 20px; font-size: 0.8rem; cursor: pointer; transition: all 0.3s; }
        .text-btn:hover { background: #FFF3E0; }
        .text-btn.active { background: #F57C00; color: white; }
        .text-btn.spanish { border-color: #FFA000; color: #F57C00; }
        .text-btn.spanish:hover { background: #FFF8E1; }
        .text-btn.spanish.active { background: #FFA000; color: white; }
        .text-container { margin-top: 15px; }
        .audio-text { padding: 15px; background: rgba(255,255,255,0.95); border-radius: 10px; text-align: left; border-left: 4px solid #F57C00; display: none; margin-bottom: 10px; }
        .audio-text.show { display: block; }
        .audio-text p { color: #333; line-height: 1.7; font-size: 0.9rem; }
        .audio-text .label { font-size: 0.7rem; color: #F57C00; font-weight: 600; margin-bottom: 8px; text-transform: uppercase; }
        .spanish-text { padding: 15px; background: #FFF8E1; border-radius: 10px; text-align: left; border-left: 4px solid #FFA000; display: none; }
        .spanish-text.show { display: block; }
        .spanish-text p { color: #5D4037; line-height: 1.7; font-size: 0.9rem; }
        .spanish-text .label { font-size: 0.7rem; color: #F57C00; font-weight: 600; margin-bottom: 8px; text-transform: uppercase; }
        .question-section { margin-top: 15px; display: none; }
        .question-section.show { display: block; }
        .question-section h4 { color: #F57C00; margin-bottom: 12px; font-size: 0.95rem; }
        .question-text { background: #F5F5F5; padding: 12px 15px; border-radius: 10px; margin-bottom: 12px; font-size: 0.95rem; color: #333; }
        .options-container { display: flex; flex-direction: column; gap: 8px; }
        .option { display: flex; align-items: center; gap: 12px; padding: 12px 14px; background: #FAFAFA; border: 2px solid #E0E0E0; border-radius: 10px; cursor: pointer; transition: all 0.2s; }
        .option:hover:not(.disabled) { border-color: #F57C00; background: #FFF3E0; }
        .option.correct { border-color: #4CAF50; background: #E8F5E9; }
        .option.incorrect { border-color: #f44336; background: #FFEBEE; }
        .option.show-correct { border-color: #4CAF50; background: #E8F5E9; }
        .option.disabled { pointer-events: none; }
        .option-letter { width: 28px; height: 28px; background: #E0E0E0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85rem; color: #666; }
        .option.correct .option-letter, .option.show-correct .option-letter { background: #4CAF50; color: white; }
        .option.incorrect .option-letter { background: #f44336; color: white; }
        .option-text { flex: 1; color: #333; font-size: 0.9rem; }
        .show-question-btn { width: 100%; padding: 15px; border: 2px dashed #9C27B0; background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%); color: #7B1FA2; border-radius: 12px; font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .show-question-btn:hover { background: linear-gradient(135deg, #E1BEE7 0%, #CE93D8 100%); transform: translateY(-2px); }
        .show-question-btn.active { background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%); color: white; border-style: solid; }
        .feedback { margin-top: 12px; padding: 12px; border-radius: 8px; display: none; font-size: 0.85rem; }
        .feedback.show { display: block; }
        .feedback.correct { background: #E8F5E9; border: 1px solid #A5D6A7; color: #2E7D32; }
        .feedback.incorrect { background: #FFEBEE; border: 1px solid #EF9A9A; color: #C62828; }
        .results-panel { display: none; background: linear-gradient(135deg, #F57C00 0%, #E65100 100%); border-radius: 20px; padding: 30px; text-align: center; color: white; margin-top: 20px; }
        .results-panel.show { display: block; }
        .results-panel .trophy { font-size: 4rem; margin-bottom: 15px; }
        .results-panel h2 { font-size: 1.8rem; margin-bottom: 10px; }
        .results-score { font-size: 3rem; font-weight: 700; margin: 15px 0; }
        .results-breakdown { display: flex; justify-content: center; gap: 20px; margin: 20px 0; flex-wrap: wrap; }
        .breakdown-item { background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 15px; text-align: center; }
        .breakdown-item .level-name { font-size: 0.8rem; opacity: 0.9; margin-bottom: 5px; }
        .breakdown-item .level-score { font-size: 1.5rem; font-weight: 700; }
        .results-message { font-size: 1rem; opacity: 0.9; margin-top: 15px; }
        .btn-retry { margin-top: 20px; padding: 15px 40px; background: white; color: #F57C00; border: none; border-radius: 30px; font-size: 1rem; font-weight: 600; cursor: pointer; }
        .btn-retry:hover { transform: scale(1.05); }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéß Comprensi√≥n Auditiva</h1>
            <div class="header-info">
                <span class="badge">üìô M√≥dulo 2</span>
                <span class="badge">üéØ Tema 5: Mi Familia</span>
                <span class="badge">üîä 10 Audios</span>
            </div>
        </div>
        <div class="nav-buttons">
            <a href="https://jucumenglishcenter.github.io/TALLER-DE-VERANO/" class="nav-btn home">üè† Volver al Panel Principal</a>
        </div>
        <div class="instructions">
            <h3>üìã Instrucciones</h3>
            <ul>
                <li>Escucha cada audio presionando el bot√≥n ‚ñ∂Ô∏è</li>
                <li>Cuando est√©s listo, presiona <strong>"‚ùì Mostrar Pregunta"</strong></li>
                <li>Si necesitas ayuda, puedes ver el texto en ingl√©s y/o en espa√±ol</li>
            </ul>
        </div>
        <div class="speed-control">
            <h3>üéöÔ∏è Velocidad del Audio</h3>
            <div class="speed-buttons">
                <button class="speed-btn" onclick="setSpeed(0.6)" data-speed="0.6">üê¢ Muy Lento</button>
                <button class="speed-btn" onclick="setSpeed(0.8)" data-speed="0.8">üö∂ Lento</button>
                <button class="speed-btn active" onclick="setSpeed(1)" data-speed="1">üèÉ Normal</button>
            </div>
        </div>
        <div class="score-panel">
            <div class="score-item"><div class="label">Respondidas</div><div class="value" id="answeredCount">0/10</div></div>
            <div class="score-item"><div class="label">Correctas</div><div class="value correct" id="correctCount">0</div></div>
            <div class="score-item"><div class="label">Incorrectas</div><div class="value incorrect" id="incorrectCount">0</div></div>
        </div>
        <div id="activitiesContainer"></div>
        <div class="results-panel" id="resultsPanel">
            <div class="trophy" id="trophy">üèÜ</div>
            <h2 id="resultsTitle">¬°Excelente!</h2>
            <div class="results-score" id="resultsScore">0/10</div>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="level-name">üü¢ F√°cil</div><div class="level-score" id="easyScore">0/4</div></div>
                <div class="breakdown-item"><div class="level-name">üü° Intermedio</div><div class="level-score" id="mediumScore">0/3</div></div>
                <div class="breakdown-item"><div class="level-name">üî¥ Dif√≠cil</div><div class="level-score" id="hardScore">0/3</div></div>
            </div>
            <div class="results-message" id="resultsMessage"></div>
            <button class="btn-retry" onclick="location.reload()">üîÑ Intentar de nuevo</button>
        </div>
    </div>
    <script>
        const activities = [
            { id: 1, level: 'easy', title: 'Mi mam√°', desc: 'Emma presenta a su mam√°', audio: 'Emma said: "This is my mother. Her name is Sara."', spanish: 'Emma dijo: "Esta es mi mam√°. Su nombre es Sara."', question: '¬øC√≥mo se llama la mam√° de Emma?', options: ['Sophie', 'Sara', 'Emma'], correct: 'b', feedback: { correct: "‚úì ¬°Correcto! Su mam√° se llama Sara.", incorrect: "‚úó Su mam√° se llama Sara." } },
            { id: 2, level: 'easy', title: 'Mi pap√°', desc: 'Emma presenta a su pap√°', audio: 'Emma said: "This is my father. His name is Carlos."', spanish: 'Emma dijo: "Este es mi pap√°. Su nombre es Carlos."', question: '¬øC√≥mo se llama el pap√° de Emma?', options: ['Carlos', 'Tom', 'Lucas'], correct: 'a', feedback: { correct: "‚úì ¬°Correcto! Su pap√° se llama Carlos.", incorrect: "‚úó Su pap√° se llama Carlos." } },
            { id: 3, level: 'easy', title: 'Mi hermano', desc: 'Emma presenta a su hermano', audio: 'Emma said: "This is my brother Lucas. He is 8 years old."', spanish: 'Emma dijo: "Este es mi hermano Lucas. Tiene 8 a√±os."', question: '¬øCu√°ntos a√±os tiene Lucas?', options: ['6 a√±os', '8 a√±os', '10 a√±os'], correct: 'b', feedback: { correct: "‚úì ¬°Correcto! Lucas tiene 8 a√±os.", incorrect: "‚úó Lucas tiene 8 a√±os." } },
            { id: 4, level: 'easy', title: 'Amo a mi familia', desc: 'Emma expresa amor', audio: 'Emma said: "I love my family. They are the best!"', spanish: 'Emma dijo: "Amo a mi familia. ¬°Son los mejores!"', question: '¬øQu√© significa "I love my family"?', options: ['Tengo familia', 'Amo a mi familia', 'Vivo con mi familia'], correct: 'b', feedback: { correct: "‚úì ¬°Correcto! 'I love' = Yo amo.", incorrect: "‚úó 'I love my family' = Amo a mi familia." } },
            { id: 5, level: 'medium', title: 'Vivo con mi familia', desc: 'Emma dice con qui√©n vive', audio: 'Emma said: "I live with my mother, my father, and my brother."', spanish: 'Emma dijo: "Vivo con mi mam√°, mi pap√° y mi hermano."', question: '¬øCon cu√°ntas personas vive Emma?', options: ['2 personas', '3 personas', '4 personas'], correct: 'b', feedback: { correct: "‚úì ¬°Correcto! Mam√°, pap√° y hermano = 3 personas.", incorrect: "‚úó Vive con 3: mother, father, brother." } },
            { id: 6, level: 'medium', title: 'Esta es mi familia', desc: 'Emma muestra fotos', audio: 'Emma said: "This is my family. This is my mother Sara, this is my father Carlos, and this is my brother Lucas."', spanish: 'Emma dijo: "Esta es mi familia. Esta es mi mam√° Sara, este es mi pap√° Carlos, y este es mi hermano Lucas."', question: '¬øQu√© palabra usamos para presentar a alguien?', options: ['That is', 'This is', 'It is'], correct: 'b', feedback: { correct: "‚úì ¬°Correcto! 'This is' = Este/Esta es.", incorrect: "‚úó 'This is' se usa para presentar." } },
            { id: 7, level: 'medium', title: 'Hermana o hermano', desc: 'Sophie habla de su familia', audio: 'Sophie said: "I have a sister. Her name is Lily. I do not have a brother."', spanish: 'Sophie dijo: "Tengo una hermana. Su nombre es Lily. No tengo hermano."', question: '¬øSophie tiene hermano?', options: ['S√≠', 'No', 'No dice'], correct: 'b', feedback: { correct: "‚úì ¬°Correcto! Sophie dijo 'I do not have a brother'.", incorrect: "‚úó Sophie dijo que NO tiene hermano." } },
            { id: 8, level: 'hard', title: 'Familia completa', desc: 'Emma describe a todos', audio: 'Emma said: "My mother is a doctor. My father is an engineer. My brother likes sports. I love them all!"', spanish: 'Emma dijo: "Mi mam√° es doctora. Mi pap√° es ingeniero. A mi hermano le gustan los deportes. ¬°Los amo a todos!"', question: '¬øQu√© le gusta a Lucas?', options: ['La m√∫sica', 'Los deportes', 'Los libros'], correct: 'b', feedback: { correct: "‚úì ¬°Correcto! A Lucas le gustan los deportes.", incorrect: "‚úó 'My brother likes sports'." } },
            { id: 9, level: 'hard', title: 'Tu familia es linda', desc: 'Sophie comenta sobre la familia', audio: 'Sophie said: "Your family is very nice, Emma!" Emma replied: "Thank you! I love my family."', spanish: 'Sophie dijo: "¬°Tu familia es muy linda, Emma!" Emma respondi√≥: "¬°Gracias! Amo a mi familia."', question: '¬øQu√© dijo Sophie sobre la familia de Emma?', options: ['Es grande', 'Es linda', 'Es peque√±a'], correct: 'b', feedback: { correct: "‚úì ¬°Correcto! Sophie dijo 'Your family is very nice'.", incorrect: "‚úó 'Nice' significa linda/agradable." } },
            { id: 10, level: 'hard', title: 'Vocabulario familiar', desc: 'Repaso de palabras', audio: 'Family words: Mother is mom. Father is dad. Sister is a girl sibling. Brother is a boy sibling. Family is all together.', spanish: 'Palabras de familia: Mother es mam√°. Father es pap√°. Sister es hermana. Brother es hermano. Family es todos juntos.', question: '¬øQu√© significa "sibling"?', options: ['Primo', 'Hermano/a', 'Abuelo'], correct: 'b', feedback: { correct: "‚úì ¬°Correcto! Sibling = hermano o hermana.", incorrect: "‚úó 'Sibling' significa hermano o hermana." } }
        ];
        let currentSpeed = 1, answered = 0, correct = 0, incorrect = 0, easyCorrect = 0, mediumCorrect = 0, hardCorrect = 0, answeredQuestions = {};
        let synthesis = window.speechSynthesis, voices = [], englishVoice = null, isPlaying = false;
        function loadVoices() { voices = synthesis.getVoices(); if (voices.length === 0) { setTimeout(loadVoices, 100); return; } const pref = ['Google US English', 'Google UK English Female', 'Microsoft Zira', 'Samantha']; for (let n of pref) { let v = voices.find(x => x.name.includes(n)); if (v) { englishVoice = v; break; } } if (!englishVoice) englishVoice = voices.find(v => v.lang.startsWith('en')) || voices[0]; }
        if (synthesis) { loadVoices(); synthesis.onvoiceschanged = loadVoices; }
        function renderActivities() { const container = document.getElementById('activitiesContainer'); let html = '', currentLevel = ''; activities.forEach(a => { if (a.level !== currentLevel) { if (currentLevel) html += '</div>'; currentLevel = a.level; const levelInfo = { easy: ['üü¢', 'F√°cil', '1-4'], medium: ['üü°', 'Intermedio', '5-7'], hard: ['üî¥', 'Dif√≠cil', '8-10'] }[a.level]; html += `<div class="level-section"><div class="level-header ${a.level}"><span class="icon">${levelInfo[0]}</span><span class="title">Nivel ${levelInfo[1]}</span><span class="subtitle">Actividades ${levelInfo[2]}</span></div>`; } html += `<div class="audio-card" id="card${a.id}"><div class="audio-header"><div class="audio-number ${a.level}">${a.id}</div><div class="audio-title"><h3>${a.title}</h3><p>${a.desc}</p></div></div><div class="audio-player"><button class="play-btn" onclick="playAudio(${a.id})" id="playBtn${a.id}">‚ñ∂Ô∏è</button><div class="text-buttons"><button class="text-btn" onclick="toggleText(${a.id})" id="textBtn${a.id}">üî§ Ver texto en ingl√©s</button><button class="text-btn spanish" onclick="toggleSpanish(${a.id})" id="spanishBtn${a.id}">üá™üá∏ Ver en espa√±ol</button></div><div class="text-container"><div class="audio-text" id="englishText${a.id}"><div class="label">üî§ Texto en Ingl√©s</div><p>${a.audio}</p></div><div class="spanish-text" id="spanishText${a.id}"><div class="label">üá™üá∏ Traducci√≥n</div><p>${a.spanish}</p></div></div></div><button class="show-question-btn" id="showQ${a.id}" onclick="toggleQuestion(${a.id})">‚ùì Mostrar Pregunta</button><div class="question-section" id="questionSection${a.id}"><h4>‚ùì Pregunta</h4><div class="question-text">${a.question}</div><div class="options-container" id="options${a.id}">${a.options.map((opt, i) => `<div class="option" onclick="selectAnswer(${a.id}, '${['a','b','c'][i]}', '${a.correct}')"><span class="option-letter">${['A','B','C'][i]}</span><span class="option-text">${opt}</span></div>`).join('')}</div><div class="feedback" id="fb${a.id}"></div></div></div>`; }); html += '</div>'; container.innerHTML = html; }
        function setSpeed(s) { currentSpeed = s; document.querySelectorAll('.speed-btn').forEach(b => { b.classList.remove('active'); if (b.dataset.speed == s) b.classList.add('active'); }); }
        function playAudio(n) { const btn = document.getElementById(`playBtn${n}`); if (isPlaying) { synthesis.cancel(); isPlaying = false; document.querySelectorAll('.play-btn').forEach(b => { b.classList.remove('playing'); b.textContent = '‚ñ∂Ô∏è'; }); return; } const a = activities.find(x => x.id === n); const u = new SpeechSynthesisUtterance(a.audio); u.voice = englishVoice; u.rate = currentSpeed; isPlaying = true; btn.classList.add('playing'); btn.textContent = '‚èπÔ∏è'; u.onend = () => { isPlaying = false; btn.classList.remove('playing'); btn.textContent = '‚ñ∂Ô∏è'; }; u.onerror = () => { isPlaying = false; btn.classList.remove('playing'); btn.textContent = '‚ñ∂Ô∏è'; }; synthesis.speak(u); }
        function toggleText(n) { const txt = document.getElementById(`englishText${n}`), btn = document.getElementById(`textBtn${n}`); txt.classList.toggle('show'); btn.classList.toggle('active'); btn.textContent = txt.classList.contains('show') ? 'üî§ Ocultar ingl√©s' : 'üî§ Ver texto en ingl√©s'; }
        function toggleSpanish(n) { const txt = document.getElementById(`spanishText${n}`), btn = document.getElementById(`spanishBtn${n}`); txt.classList.toggle('show'); btn.classList.toggle('active'); btn.textContent = txt.classList.contains('show') ? 'üá™üá∏ Ocultar espa√±ol' : 'üá™üá∏ Ver en espa√±ol'; }
        function toggleQuestion(n) { const section = document.getElementById(`questionSection${n}`), btn = document.getElementById(`showQ${n}`); section.classList.toggle('show'); btn.classList.toggle('active'); btn.textContent = section.classList.contains('show') ? '‚ùì Ocultar Pregunta' : '‚ùì Mostrar Pregunta'; }
        function selectAnswer(n, sel, cor) { if (answeredQuestions[n]) return; answeredQuestions[n] = true; const a = activities.find(x => x.id === n); const opts = document.querySelectorAll(`#options${n} .option`), fb = document.getElementById(`fb${n}`), ok = sel === cor; answered++; if (ok) { correct++; if (n <= 4) easyCorrect++; else if (n <= 7) mediumCorrect++; else hardCorrect++; } else incorrect++; opts.forEach(o => { o.classList.add('disabled'); const l = o.querySelector('.option-letter').textContent.toLowerCase(); if (l === sel) o.classList.add(ok ? 'correct' : 'incorrect'); if (l === cor && !ok) o.classList.add('show-correct'); }); fb.innerHTML = ok ? a.feedback.correct : a.feedback.incorrect; fb.classList.add('show', ok ? 'correct' : 'incorrect'); updateScore(); if (answered === 10) setTimeout(showResults, 1000); }
        function updateScore() { document.getElementById('answeredCount').textContent = `${answered}/10`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = incorrect; }
        function showResults() { const p = document.getElementById('resultsPanel'), pct = (correct / 10) * 100; document.getElementById('resultsScore').textContent = `${correct}/10`; document.getElementById('easyScore').textContent = `${easyCorrect}/4`; document.getElementById('mediumScore').textContent = `${mediumCorrect}/3`; document.getElementById('hardScore').textContent = `${hardCorrect}/3`; const tr = document.getElementById('trophy'), ti = document.getElementById('resultsTitle'), ms = document.getElementById('resultsMessage'); if (pct >= 90) { tr.textContent = 'üèÜ'; ti.textContent = '¬°Excelente!'; ms.textContent = 'Dominas el vocabulario de familia.'; } else if (pct >= 70) { tr.textContent = 'ü•à'; ti.textContent = '¬°Muy bien!'; ms.textContent = 'Buen progreso.'; } else if (pct >= 50) { tr.textContent = 'ü•â'; ti.textContent = '¬°Buen intento!'; ms.textContent = 'Sigue practicando.'; } else { tr.textContent = 'üìö'; ti.textContent = 'Sigue practicando'; ms.textContent = 'Escucha los audios de nuevo.'; } p.classList.add('show'); p.scrollIntoView({ behavior: 'smooth' }); }
        renderActivities();
    </script>
</body>
</html>
