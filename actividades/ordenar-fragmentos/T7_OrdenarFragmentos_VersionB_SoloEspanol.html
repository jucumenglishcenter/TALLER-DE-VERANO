<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ordenar Fragmentos | Tema 7: En el Restaurante | VersiÃ³n B</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#E8F5E9,#C8E6C9);min-height:100vh;padding:15px}.container{max-width:1400px;margin:0 auto}.header{background:linear-gradient(135deg,#43A047,#2E7D32);border-radius:16px;padding:20px;text-align:center;margin-bottom:20px;color:white}.header h1{font-size:1.4rem}.badge{display:inline-block;background:rgba(255,255,255,.2);padding:6px 14px;border-radius:20px;font-size:.8rem;color:white;margin:3px}.level-indicator{background:#66BB6A;padding:6px 14px;border-radius:20px;font-size:.8rem;color:white;font-weight:700}.level-indicator.level-2{background:#E53935}.instructions{background:white;border-radius:12px;padding:15px;margin-bottom:20px;border-left:4px solid #43A047}.level-control{display:flex;justify-content:center;gap:10px;margin-bottom:20px}.btn-level{padding:12px 28px;border:none;border-radius:25px;font-weight:700;cursor:pointer}.btn-level-up{background:#66BB6A;color:white}.btn-level-down{background:#4CAF50;color:white;display:none}.btn-level-down.show{display:block}.btn-level-up.hide{display:none}.main-layout{display:grid;grid-template-columns:1fr 1fr;gap:20px}.main-layout.full-width{grid-template-columns:1fr}@media(max-width:1000px){.main-layout{grid-template-columns:1fr}}.panel{background:white;border-radius:16px;overflow:hidden}.panel-header{padding:15px;color:white;font-weight:600}.panel-left .panel-header{background:#43A047}.panel-right .panel-header{background:#757575}.panel-content{padding:20px}.panel-right.hidden{display:none}.fragment-item{background:#E8F5E9;border:2px solid #43A047;border-radius:10px;padding:12px;margin-bottom:10px;cursor:grab;display:flex;align-items:center;gap:12px}.fragment-item.correct{background:#C8E6C9;border-color:#2E7D32}.fragment-item.incorrect{background:#FFCDD2;border-color:#E53935}.fragment-number{background:#43A047;color:white;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700}.fragment-item.correct .fragment-number{background:#2E7D32}.fragment-item.incorrect .fragment-number{background:#E53935}.drop-zone{min-height:380px;border:2px dashed #BDBDBD;border-radius:12px;padding:15px;background:#FAFAFA}.drop-zone.drag-over{border-color:#43A047;background:#E8F5E9}.drop-placeholder{text-align:center;color:#9E9E9E;padding:20px}.story-dialogue{background:white;padding:12px;border-radius:8px;margin-bottom:10px;border:1px solid #E0E0E0}.story-dialogue .speaker{font-weight:700;color:#43A047}.text-highlight{background:#FFF9C4;padding:2px 6px;border-radius:4px;font-weight:600}.button-row{display:flex;gap:10px;margin-top:20px}.btn{padding:12px 24px;border:none;border-radius:25px;font-weight:600;cursor:pointer}.btn-primary{background:#43A047;color:white}.btn-secondary{background:#E0E0E0}.result-box{margin-top:15px;padding:15px;border-radius:10px;text-align:center;display:none}.result-box.show{display:block}.result-box.success{background:#C8E6C9}.result-box.partial{background:#FFF3E0}.tip-box{background:#E8F5E9;border-left:4px solid #43A047;padding:12px;margin-top:15px;border-radius:8px;font-size:.85rem}.challenge-banner{background:#E53935;color:white;padding:12px;border-radius:10px;margin-bottom:15px;text-align:center;display:none}.challenge-banner.show{display:block}
    </style>
</head>
<body>
    <div class="container">
        <div class="header"><h1>âœï¸ Ordenar Fragmentos</h1><div>Story 3: Emma's Adventure - Parte 1</div><div><span class="badge">ğŸ“— MÃ³dulo 3</span><span class="badge">ğŸ¯ Tema 7: En el Restaurante</span><span class="badge">ğŸ“ VersiÃ³n B</span><span class="level-indicator" id="levelIndicator">â­ Nivel 1</span></div></div>
        <div class="instructions"><h3 style="color:#2E7D32">ğŸ“‹ Instrucciones</h3><p>Lee el cuento en espaÃ±ol y ordena los fragmentos en inglÃ©s.</p></div>
        <div class="level-control"><button class="btn-level btn-level-up" id="btnLevelUp" onclick="levelUp()">ğŸš€ Subir Nivel</button><button class="btn-level btn-level-down" id="btnLevelDown" onclick="levelDown()">ğŸ“– Mostrar cuento</button></div>
        <div class="main-layout" id="mainLayout">
            <div class="panel panel-left">
                <div class="panel-header">âœï¸ Ordena los fragmentos</div>
                <div class="panel-content">
                    <div class="challenge-banner" id="challengeBanner"><strong>ğŸ”¥ MODO DESAFÃO</strong></div>
                    <div id="sourcePool">
                        <div class="fragment-item" draggable="true" data-order="3"><div class="fragment-number">?</div><div>"I want pasta, please. And water."</div></div>
                        <div class="fragment-item" draggable="true" data-order="1"><div class="fragment-number">?</div><div>"I'm hungry! Let's see the menu."</div></div>
                        <div class="fragment-item" draggable="true" data-order="6"><div class="fragment-number">?</div><div>"The bill, please. Thank you, Mr. Chen!"</div></div>
                        <div class="fragment-item" draggable="true" data-order="4"><div class="fragment-number">?</div><div>"The food is delicious! I want more water, please."</div></div>
                        <div class="fragment-item" draggable="true" data-order="2"><div class="fragment-number">?</div><div>"The menu, please. What do you want to order?"</div></div>
                        <div class="fragment-item" draggable="true" data-order="5"><div class="fragment-number">?</div><div>"I want pizza!" "I want a hamburger!"</div></div>
                    </div>
                    <div style="margin-top:15px;font-size:.85rem;color:#666">ğŸ“¥ Suelta aquÃ­:</div>
                    <div class="drop-zone" id="dropZone"><div class="drop-placeholder">Arrastra aquÃ­</div></div>
                    <div class="button-row"><button class="btn btn-primary" onclick="checkOrder()">âœ“ Verificar</button><button class="btn btn-secondary" onclick="resetActivity()">â†º Reiniciar</button></div>
                    <div class="result-box" id="resultBox"><h3 id="resultTitle"></h3><p id="resultText"></p></div>
                    <div class="tip-box"><strong>ğŸ’¡ Vocabulario:</strong> hungry=hambriento | menu=menÃº | want=querer | please=por favor | food=comida | delicious=delicioso | water=agua | bill=cuenta</div>
                </div>
            </div>
            <div class="panel panel-right" id="storyPanel">
                <div class="panel-header">ğŸ“– Cuento (Solo EspaÃ±ol)</div>
                <div class="panel-content">
                    <div class="story-dialogue"><div class="speaker">ğŸ‘§ Emma:</div>"Â¡Tengo <span class="text-highlight">hambre</span>! Veamos el <span class="text-highlight">menÃº</span>."</div>
                    <div class="story-dialogue"><div class="speaker">ğŸ‘¨ Mr. Chen:</div>"El <span class="text-highlight">menÃº</span>, <span class="text-highlight">por favor</span>. Â¿QuÃ© <span class="text-highlight">quieren</span> ordenar?"</div>
                    <div class="story-dialogue"><div class="speaker">ğŸ‘§ Emma:</div>"<span class="text-highlight">Quiero</span> pasta, <span class="text-highlight">por favor</span>. Y <span class="text-highlight">agua</span>."</div>
                    <div class="story-dialogue"><div class="speaker">ğŸ‘§ Emma:</div>"Â¡La <span class="text-highlight">comida</span> estÃ¡ <span class="text-highlight">deliciosa</span>! <span class="text-highlight">Quiero</span> mÃ¡s <span class="text-highlight">agua</span>, por favor."</div>
                    <div class="story-dialogue"><div class="speaker">ğŸ‘§ğŸ‘¦ Sophie/Tom:</div>"Â¡<span class="text-highlight">Quiero</span> pizza!" "Â¡<span class="text-highlight">Quiero</span> una hamburguesa!"</div>
                    <div class="story-dialogue"><div class="speaker">ğŸ‘§ Emma:</div>"La <span class="text-highlight">cuenta</span>, <span class="text-highlight">por favor</span>. Â¡Gracias, Mr. Chen!"</div>
                </div>
            </div>
        </div>
    </div>
    <script>
        let draggedItem=null,currentLevel=1;document.querySelectorAll('.fragment-item').forEach(item=>{item.addEventListener('dragstart',()=>draggedItem=item);item.addEventListener('dragend',()=>draggedItem=null)});const dropZone=document.getElementById('dropZone');dropZone.addEventListener('dragover',e=>{e.preventDefault();dropZone.classList.add('drag-over');const after=[...dropZone.querySelectorAll('.fragment-item')].reduce((c,el)=>{const b=el.getBoundingClientRect();const o=e.clientY-b.top-b.height/2;return o<0&&o>c.offset?{offset:o,element:el}:c},{offset:-Infinity}).element;after?dropZone.insertBefore(draggedItem,after):dropZone.appendChild(draggedItem)});dropZone.addEventListener('dragleave',()=>dropZone.classList.remove('drag-over'));dropZone.addEventListener('drop',e=>{e.preventDefault();dropZone.classList.remove('drag-over');const ph=dropZone.querySelector('.drop-placeholder');if(ph)ph.remove();dropZone.querySelectorAll('.fragment-item').forEach((it,i)=>it.querySelector('.fragment-number').textContent=i+1)});function checkOrder(){const items=dropZone.querySelectorAll('.fragment-item');if(items.length<6){alert('Â¡Ordena todos!');return}let c=0;items.forEach((it,i)=>{it.classList.remove('correct','incorrect');if(parseInt(it.dataset.order)===i+1){it.classList.add('correct');c++}else it.classList.add('incorrect')});const rb=document.getElementById('resultBox');rb.classList.remove('success','partial');rb.classList.add('show');if(c===6){rb.classList.add('success');document.getElementById('resultTitle').textContent=currentLevel===2?'ğŸ† Â¡INCREÃBLE!':'ğŸ‰ Â¡Excelente!';document.getElementById('resultText').textContent='Â¡Todos correctos!'}else{rb.classList.add('partial');document.getElementById('resultTitle').textContent='ğŸ’ª Â¡Sigue!';document.getElementById('resultText').textContent=c+'/6 correctos.'}}function resetActivity(){const sp=document.getElementById('sourcePool');dropZone.querySelectorAll('.fragment-item').forEach(it=>{it.classList.remove('correct','incorrect');it.querySelector('.fragment-number').textContent='?';sp.appendChild(it)});dropZone.innerHTML='<div class="drop-placeholder">Arrastra aquÃ­</div>';document.getElementById('resultBox').classList.remove('show')}function levelUp(){currentLevel=2;document.getElementById('storyPanel').classList.add('hidden');document.getElementById('mainLayout').classList.add('full-width');document.getElementById('challengeBanner').classList.add('show');document.getElementById('levelIndicator').textContent='ğŸ”¥ Nivel 2';document.getElementById('levelIndicator').classList.add('level-2');document.getElementById('btnLevelUp').classList.add('hide');document.getElementById('btnLevelDown').classList.add('show')}function levelDown(){currentLevel=1;document.getElementById('storyPanel').classList.remove('hidden');document.getElementById('mainLayout').classList.remove('full-width');document.getElementById('challengeBanner').classList.remove('show');document.getElementById('levelIndicator').textContent='â­ Nivel 1';document.getElementById('levelIndicator').classList.remove('level-2');document.getElementById('btnLevelUp').classList.remove('hide');document.getElementById('btnLevelDown').classList.remove('show')}
    </script>
</body>
</html>
